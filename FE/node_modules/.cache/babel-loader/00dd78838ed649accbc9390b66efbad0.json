{"ast":null,"code":"import { decodeJwt } from \"jose\";\nimport { ADMIN, PARENT, STUDENT, SUPER_ADMIN } from \"../Constant/Constant\";\n\nconst roleBasedRedirect = () => {\n  const token = localStorage.getItem(\"access-token\");\n  console.log(decodeJwt(token, {\n    complete: true\n  }));\n  const userDetail = decodeJwt(token, {\n    complete: true\n  });\n  localStorage.setItem(\"userDetail\", JSON.stringify(userDetail));\n  const {\n    role\n  } = userDetail;\n\n  if (role === SUPER_ADMIN) {\n    window.location.href = \"#/portal\";\n  } else if (role === ADMIN) {} else if (role === PARENT) {} else if (role === STUDENT) {}\n};\n\nconst payloadValidator = function (payload, data) {\n  let message = {\n    status: false,\n    message: \"\"\n  };\n  let requestData = {};\n\n  for (let index in payload) {\n    if (data[payload[index]['id']] === \"\") {\n      message = {\n        message: `${payload[index]['label']} missing`,\n        status: true,\n        data: {}\n      };\n      return message;\n    } else {\n      requestData = { ...requestData,\n        [payload[index]['id']]: data[payload[index]['index']]\n      };\n    }\n  }\n\n  return { ...message,\n    data: requestData\n  };\n};\n\nexport { roleBasedRedirect, payloadValidator };","map":{"version":3,"names":["decodeJwt","ADMIN","PARENT","STUDENT","SUPER_ADMIN","roleBasedRedirect","token","localStorage","getItem","console","log","complete","userDetail","setItem","JSON","stringify","role","window","location","href","payloadValidator","payload","data","message","status","requestData","index"],"sources":["/sharuk/schooldost-fe/schooldost-fe/src/Utility/Utility.js"],"sourcesContent":["import {decodeJwt} from \"jose\"\nimport { ADMIN, PARENT, STUDENT, SUPER_ADMIN } from \"../Constant/Constant\";\n\nconst roleBasedRedirect=()=>{\n        const token=localStorage.getItem(\"access-token\")\n        console.log( decodeJwt(token,{complete:true}));\n        const userDetail=decodeJwt(token,{complete:true})\n        localStorage.setItem(\"userDetail\",JSON.stringify(userDetail))\n        const {role}=userDetail\n        if(role===SUPER_ADMIN){\n            window.location.href=\"#/portal\"\n        }\n        else if(role===ADMIN){\n        \n        }\n        else if(role===PARENT){\n        \n        }\n        else if(role===STUDENT){\n        \n        }\n}\n\nconst payloadValidator = function (payload, data) {\n    let message = {\n      status: false,\n      message: \"\",\n    }\n    let requestData={}\n    for (let index in payload) {\n      if (data[payload[index]['id']] === \"\") {\n        message = {\n          message: `${payload[index]['label']} missing`,\n          status: true,\n          data:{}\n        }\n        return message\n      }\n      else {\n        requestData={\n                    ...requestData,\n                    [payload[index]['id']]:data[payload[index]['index']]\n            }\n      }\n    \n    }\n    return {\n            ...message,\n            data:requestData\n        };\n  }\n\nexport {\n    roleBasedRedirect,\n    payloadValidator\n}"],"mappings":"AAAA,SAAQA,SAAR,QAAwB,MAAxB;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,OAAxB,EAAiCC,WAAjC,QAAoD,sBAApD;;AAEA,MAAMC,iBAAiB,GAAC,MAAI;EACpB,MAAMC,KAAK,GAACC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAZ;EACAC,OAAO,CAACC,GAAR,CAAaV,SAAS,CAACM,KAAD,EAAO;IAACK,QAAQ,EAAC;EAAV,CAAP,CAAtB;EACA,MAAMC,UAAU,GAACZ,SAAS,CAACM,KAAD,EAAO;IAACK,QAAQ,EAAC;EAAV,CAAP,CAA1B;EACAJ,YAAY,CAACM,OAAb,CAAqB,YAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeH,UAAf,CAAlC;EACA,MAAM;IAACI;EAAD,IAAOJ,UAAb;;EACA,IAAGI,IAAI,KAAGZ,WAAV,EAAsB;IAClBa,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,UAArB;EACH,CAFD,MAGK,IAAGH,IAAI,KAAGf,KAAV,EAAgB,CAEpB,CAFI,MAGA,IAAGe,IAAI,KAAGd,MAAV,EAAiB,CAErB,CAFI,MAGA,IAAGc,IAAI,KAAGb,OAAV,EAAkB,CAEtB;AACR,CAlBD;;AAoBA,MAAMiB,gBAAgB,GAAG,UAAUC,OAAV,EAAmBC,IAAnB,EAAyB;EAC9C,IAAIC,OAAO,GAAG;IACZC,MAAM,EAAE,KADI;IAEZD,OAAO,EAAE;EAFG,CAAd;EAIA,IAAIE,WAAW,GAAC,EAAhB;;EACA,KAAK,IAAIC,KAAT,IAAkBL,OAAlB,EAA2B;IACzB,IAAIC,IAAI,CAACD,OAAO,CAACK,KAAD,CAAP,CAAe,IAAf,CAAD,CAAJ,KAA+B,EAAnC,EAAuC;MACrCH,OAAO,GAAG;QACRA,OAAO,EAAG,GAAEF,OAAO,CAACK,KAAD,CAAP,CAAe,OAAf,CAAwB,UAD5B;QAERF,MAAM,EAAE,IAFA;QAGRF,IAAI,EAAC;MAHG,CAAV;MAKA,OAAOC,OAAP;IACD,CAPD,MAQK;MACHE,WAAW,GAAC,EACA,GAAGA,WADH;QAEA,CAACJ,OAAO,CAACK,KAAD,CAAP,CAAe,IAAf,CAAD,GAAuBJ,IAAI,CAACD,OAAO,CAACK,KAAD,CAAP,CAAe,OAAf,CAAD;MAF3B,CAAZ;IAID;EAEF;;EACD,OAAO,EACC,GAAGH,OADJ;IAECD,IAAI,EAACG;EAFN,CAAP;AAID,CA3BH;;AA6BA,SACIpB,iBADJ,EAEIe,gBAFJ"},"metadata":{},"sourceType":"module"}